<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        font-family: arial, sans-serif;
        padding: 0.5rem;
      }
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 80%;
      }

      td,
      th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
      }

      /**tr:nth-child(even) {
        background-color: #dddddd;
      }*/
      
      /**
      .progTitle {
        text-transform: lowercase;
      }
      
      .progTitle::first-letter {
          text-transform: uppercase;
      }*/

      .progTitle {
        text-transform: capitalize;
      }
    </style>
  </head>
  <body>
    <h4>Hello {{name}},</h4>
    <br />
    <p>Kindly find your weekly report below</p>
    <br />
    <h3>Weekly Report</h3>

    {% comment %} <table>
      <tr>
        <th>Date</th>
        <th>Company</th>
        <th>Client</th>
        <th>Employee</th>
        <th>Shift Start</th>
        <th>Shift End</th>
      </tr>
      {% for event in events %}
      <tr>
        <td>{{event.formatted_date}}</td>
        <td class="progTitle">{{event.company.name}}</td>
        <td class="progTitle">{{event.client.name}}</td>
        <td class="progTitle">{{event.employee.user.last_name}} {{event.employee.user.first_name}}</td>
        <td>{{event.start_time}}</td>
        <td>{{event.end_time}}</td>
      </tr>
      {% endfor %}
    </table> {% endcomment %}

    <table>
      <tr>
        <th>Attribute</th>
        <th>Sunday</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
        <th>Hours</th>
      </tr>
      {% for week in payload %}
      <tr>
        <h3>{{week['time']}}</h3>
        <h3>{{week['week']}}</h3>
        <h3>{{week['events']}}</h3>
        {% comment %} <td>{{forloop.counter}}</td>

        {% for event in week['events'] %}

        {% if event.formatted_date.weekday() == 6%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% if event.formatted_date.weekday() == 0%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% if event.formatted_date.weekday() == 1%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% if event.formatted_date.weekday() == 2%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% if event.formatted_date.weekday() == 3%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% if event.formatted_date.weekday() == 4%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% if event.formatted_date.weekday() == 5%}
        <td>{{event.start_time}} - {{event.end_time}}</td>
        {% endif %}

        {% endfor%}

        <td>{{week.time}}</td> {% endcomment %}
      </tr>
      {% endfor %}
    </table>
    <br/>
    <p>Total Hours: {{total_time}}</p>
  </body>
</html>
